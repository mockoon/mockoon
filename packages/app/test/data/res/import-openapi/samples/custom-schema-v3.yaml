openapi: "3.0.0"
info:
  title: "Sample v3 schema"
  description: "Sample v3 schema"
  version: "1.0.0"
servers:
  - url: "{scheme}://mockoon.com/{path}"
    variables:
      scheme:
        enum:
          - "https"
          - "http"
        default: "https"
      path:
        enum:
          - "api"
          - "apiv2"
        default: "api"
paths:
  /withparams/{paramName}/{param-id}:
    get:
      responses:
        "200":
          description: "Success"
  /endpoint:
    get:
      responses:
        "200":
          description: "Success"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/SchemaObject"
          headers:
            Header-From-Example:
              schema:
                type: string
              example: example value
            Header-From-First-Examples:
              schema:
                type: string
              examples:
                test:
                  value: first example value
            Header-From-Schema-String:
              schema:
                type: string
            Header-From-Schema-Int:
              schema:
                type: integer
        "404":
          description: "Not found"
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string
                example:
                  status: 404
                  message: "Resource not found"
  /endpoint2:
    get:
      responses:
        default:
          description: "Success"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/SchemaObject"
  /endpoint3:
    get:
      responses:
        default:
          description: "Success"
          content:
            application/json; charset=utf-8:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/SchemaObject"
  /model:
    get:
      summary: Returns a model.
      description: Some description.
      responses:
        "200":
          description: A model with a name
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Model"
  /circular:
    get:
      responses:
        "200":
          description: "Circular reference example"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CircularSchemaA"
  /ext-ref:
    get:
      responses:
        "200":
          description: "Ext ref example"
          content:
            application/json:
              schema:
                $ref: "https://raw.githubusercontent.com/mockoon/mock-samples/refs/heads/main/samples/sample-openapi-v3-schema.yaml#/ExtSchema"
  /cache-test:
    get:
      responses:
        "200":
          description: "Ext ref cache test"
          content:
            application/json:
              schema:
                $ref: "https://raw.githubusercontent.com/mockoon/mock-samples/refs/heads/main/samples/sample-openapi-v3-schema.yaml#/ExtSchema"
  /wrong-ext-ref:
    get:
      responses:
        "200":
          description: "Wrong ext ref example"
          content:
            application/json:
              schema:
                $ref: "https://raw.githubusercontent.com/mockoon/mock-samples/refs/heads/main/samples/sample-openapi-v3-schema.yaml#/ExtSchemaNotExisting"
  /ref-path:
    $ref: "#/components/paths"

  /all-of-example:
    get:
      operationId: getAllOfExample
      summary: Get an example with allOf schema
      responses:
        "200":
          description: |-
            Response with allOf schema
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      firstprop:
                        type: integer
                        format: int64
                    example:
                      firstprop: abc
                  - type: object
                    properties:
                      secondprop:
                        type: string
                    example:
                      secondprop: def
                  - $ref: "#/components/schemas/SimpleSchema"
              examples:
                Example1:
                  value:
                    id: 98765
                    name: Another Name
                    firstprop: 12345
                    secondprop: Example Name

components:
  paths:
    get:
      responses:
        "200":
          description: "Success"
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: "#/components/schemas/SimpleSchema"
  schemas:
    SimpleSchema:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
      example:
        id: 1
        name: Sample name
    SchemaObject:
      properties:
        id:
          type: "integer"
          format: "int64"
        order:
          type: "number"
          format: "double"
        quantity:
          type: "number"
          format: "float"
        datetime:
          type: "string"
          format: "date-time"
        date:
          type: "string"
          format: "date"
        age:
          type: "integer"
          default: "32"
        email:
          type: "string"
          format: "email"
        uuid:
          type: "string"
          format: "uuid"
        tags:
          type: "array"
          items:
            $ref: "#/components/schemas/Tag"
        status:
          type: "string"
          description: "Order Status"
          enum:
            - "enum1"
            - "enum2"
            - "enum3"
        inProgress:
          type: "boolean"
        complete:
          type: "boolean"
          example: true
        categories:
          type: "array"
          items:
            $ref: "#/components/schemas/Category"
        allOfArray:
          type: "array"
          items:
            allOf:
              - $ref: "#/components/schemas/Category"
              - $ref: "#/components/schemas/Tag"
        oneOfArray:
          type: "array"
          items:
            oneOf:
              - $ref: "#/components/schemas/Tag"
              - $ref: "#/components/schemas/Category"
        anyOfArray:
          type: "array"
          items:
            anyOf:
              - $ref: "#/components/schemas/Category"
              - $ref: "#/components/schemas/Tag"

    CircularSchemaA:
      type: object
      properties:
        name:
          type: string
        sibling:
          $ref: "#/components/schemas/CircularSchemaB"
        related:
          $ref: "#/components/schemas/CircularSchemaB"

    CircularSchemaB:
      type: object
      properties:
        id:
          type: integer
        parent:
          $ref: "#/components/schemas/CircularSchemaA"

    Category:
      type: "object"
      properties:
        name:
          type: "string"

    Tag:
      type: "string"

    Model:
      type: object
      properties:
        name:
          type: string
      example:
        name: custom_name
